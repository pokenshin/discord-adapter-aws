# discord-adapter-aws
A simple adapter to POST messages to a Discord Webhook, using Jira as an example origin point. Designed to be deployed to AWS Lambda and be accessed through AWS API Gateway.


## Pre-requisites
- A working Jira Cloud subscription with a webhook configured and attached.
- A Discord server with a webhook configured and attached.
- An AWS API Gateway setup pointing to an AWS Lambda

## Usage
Simply clone the repository somewhere and open it as a project in IntelliJ or any other IDE. Then, edit the following variables according to your own locations:

- Class "DiscordConnector" - "webhookUrl" = the URL of your discord webhook.
- Class "JsonMapper" - "jiraBaseUrl" = the URL of your Jira Cloud. Should be something like "http://pokenshin.atlassian.net/"

## Build instructions
To be able to use this on AWS Lambda, you must create a "Full" jar. To do so, on IntelliJ with Maven:
- With the project open, go to "Run / Edit Configurations..."
- Click the "+" symbol to create a new build configuration.
- Select "Maven" as the type.
- Name it whatever you want. I named it "Build Project".
- At the "Parameters" tab, under the "Before Launch: activate tool window" guide, click the "+" symbol and select "Run Maven Goal".
- Under "Command Line" on the popup window, type "package shade:shade".
- Save everything and run this configuration.
- After the process ends, you should have a "target" directory in your base dir with the files "discord-adapter-aws-XX.jar", as well as the shaded and original one.

## Other notes
- The JAR generated by this repository should be used on an AWS Lambda, which should be called as a POST method from an AWS API Gateway.
- Don't forget to configure the class/method of the Handler in AWS to "AwsHandler::handleRequest".
- After configuring the AWS side, you should point the Jira webhook to the AWS API Gateway.
- No further configuration is necessary on the Discord side.
